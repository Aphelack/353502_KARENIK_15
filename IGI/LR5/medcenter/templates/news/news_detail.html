{% extends "base.html" %}
{% load static %}

{% block title %}{{ news.title }} - Новости{% endblock %}

{% block content %}
<div>
    <a href="{% url 'news_list' %}">← Вернуться к списку новостей</a>
</div>

<article>
    <h1>{{ news.title }}</h1>

    <div>
        {% if news.category %}
        <span>Категория: {{ news.category.name }}</span> | 
        {% endif %}
        <span>Опубликовано: {{ news.published_at|date:"d.m.Y H:i" }}</span> | 
        <span>Автор: {{ news.author.get_full_name|default:news.author.username }}</span>
    </div>

    {% if news.image %}
    <div style="margin: 20px 0;">
        <img src="{{ news.image.url }}" alt="{{ news.title }}" style="max-width: 100%; height: auto;">
    </div>
    {% endif %}

    <div style="border: 1px solid #ddd; padding: 20px; margin: 20px 0;">
        <h2>{{ news.summary }}</h2>
        <div>
            {{ news.content|linebreaks }}
        </div>
    </div>

    <div>
        <p><small>Создано: {{ news.created_at|date:"d.m.Y H:i" }}</small></p>
        {% if news.updated_at != news.created_at %}
        <p><small>Обновлено: {{ news.updated_at|date:"d.m.Y H:i" }}</small></p>
        {% endif %}
    </div>
</article>

{% if related_news %}
<div style="margin-top: 40px;">
    <h3>Похожие новости</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
        {% for item in related_news %}
        <div style="border: 1px solid #ddd; padding: 15px;">
            {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.title }}" style="width: 100%; height: 150px; object-fit: cover;">
            {% else %}
            <img src="{% static 'images/news_default.svg' %}" alt="{{ item.title }}" style="width: 100%; height: 150px; object-fit: cover;">
            {% endif %}
            <h4>{{ item.title }}</h4>
            <p><small>{{ item.published_at|date:"d.m.Y" }}</small></p>
            <p><a href="{% url 'news_detail' item.slug %}">Читать →</a></p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
