{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h2>Кабинет клиента</h2>
    <p>Добро пожаловать, {{ user.username }}!</p>
    <ul>
        <li>Имя: {{ client.first_name }}</li>
        <li>Фамилия: {{ client.last_name }}</li>
        <li>Адрес: {{ client.address }}</li>
        <li>Дата рождения: {{ client.birth_date }}</li>
        <li>Логин: {{ user.username }}</li>
        <li>Email: {{ user.email }}</li>
    </ul>
    <h3>Ваши записи</h3>
    <table class="table table-dark">
        <tr>
            <th>Дата и время</th>
            <th>Врач</th>
            <th>Услуга</th>
            <th>Заметки</th>
        </tr>
        {% for app in appointments %}
        <tr>
            <td>{{ app.appointment_date }}</td>
            <td>
                {% if app.doctor %}
                    <a href="{% url 'doctor_detail' app.doctor.id %}">
                        {{ app.doctor.user.last_name }} {{ app.doctor.user.first_name }}
                    </a>
                {% else %}
                    -
                {% endif %}
            </td>
            <td>{{ app.service }}</td>
            <td>{{ app.notes }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="4">Нет записей</td></tr>
        {% endfor %}
    </table>
    <a href="{% url 'account_logout' %}" class="btn btn-danger mt-3">Выйти</a>
</div>
{% endblock %}